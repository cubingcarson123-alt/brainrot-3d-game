<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WASD MOVE / ARROWS LOOK</title>
<style>
body{margin:0;overflow:hidden;background:#000}
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.158/build/three.min.js"></script>
<script>
/* ===== SCENE ===== */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x222);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,1.6,5);

const renderer = new THREE.WebGLRenderer();
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* ===== LIGHT ===== */
scene.add(new THREE.AmbientLight(0xffffff, 1));

/* ===== FLOOR ===== */
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(100,100),
  new THREE.MeshBasicMaterial({color:0x555})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

/* ===== WALL ===== */
const wall = new THREE.Mesh(
  new THREE.BoxGeometry(10,2,1),
  new THREE.MeshBasicMaterial({color:0x00f})
);
wall.position.set(0,1,0);
scene.add(wall);

/* ===== INPUT ===== */
const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

let yaw = 0;
const lookSpeed = 0.04;
const moveSpeed = 0.2;

/* ===== COLLISION ===== */
function hit(pos){
  return Math.abs(pos.z - wall.position.z) < 1 &&
         Math.abs(pos.x - wall.position.x) < 5;
}

/* ===== LOOP ===== */
function animate(){
  requestAnimationFrame(animate);

  /* LOOK WITH ARROWS */
  if(keys.ArrowLeft)  yaw += lookSpeed;
  if(keys.ArrowRight) yaw -= lookSpeed;

  camera.rotation.y = yaw;

  /* MOVE WITH WASD */
  let move = new THREE.Vector3();
  if(keys.w) move.z -= 1;
  if(keys.s) move.z += 1;
  if(keys.a) move.x -= 1;
  if(keys.d) move.x += 1;

  if(move.length()){
    move.normalize().applyAxisAngle(new THREE.Vector3(0,1,0), yaw);
    const next = camera.position.clone().add(move.multiplyScalar(moveSpeed));
    if(!hit(next)) camera.position.copy(next);
  }

  renderer.render(scene, camera);
}
animate();

onresize = () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
};
</script>

</body>
</html>
